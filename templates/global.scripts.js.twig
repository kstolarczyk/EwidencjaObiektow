{% trans_default_domain 'App' %}
$.fn.disable = function () {
    $(this).prop("disabled", true);
};

$.fn.enable = function () {
    $(this).prop("disabled", false);
};

$(document).ajaxStart(function () {
    let buttons = $(".btn:not(.ajax-disabled)");
    buttons.addClass("ajax-disabled");
    buttons.disable();
});
$(document).ajaxStop(function () {
    let buttons = $(".ajax-disabled");
    buttons.removeClass("ajax-disabled");
    buttons.enable();
});

$(document).ajaxComplete(function (event, xhr) {
    switch (xhr.status) {
        case 404:
            error({
                text: "{{ 'Nie.odnaleziono.obiektu'|trans }}"
            });
            break;
        case 500:
            error({
                text: "{{ 'Nieoczekiwany.blad.aplikacji'|trans }}"
            });
            break;
        case 403:
            error({
                text: "{{ 'Odmowa.dostepu'|trans }}"
            });
            window.location.reload();
            break;
    }
});